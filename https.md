### https

#### 非对称加密

* 公钥加密 ，只能用私钥来解密 ，私钥加密 只能公钥解密 （RSA，DH DSA ）

#### 证书的基本概念

- 根证书：根证书负责其他可信任证书的颁发。不同的CA机构具有不同的根证书。通过openssl可以自建CA证书。用于颁发其他证书 （用根证书的私钥对其他的证书进行签名，保证证书是可信任的）

- 证书认证原理 ：根证书用自己的**私钥**签署服务端证书，验证时要用根证书的**公钥**解密服务端证书。从而达到身份验证，这种方式叫做**数字签名**。

   



####TLS握手流程

![fe](https://upload-images.jianshu.io/upload_images/460263-f616b2cdc5a36ae6.gif?imageMogr2/auto-orient/strip%7CimageView2/2/w/484)

![](http://sean-images.qiniudn.com/tls-ssl.svg)

-  客户端 发送SSL version 支持密码套件（Cipher suite）的列表 等信息发送给 服务端  除此之外 生成一个随机数（random1 ）。保存在客户单。并发送给服务器
- 服务端 从客户端发送的信息选择 SSL version  密码套件 。服务端证书 发送给客户端 
- 客户端收到服务端的证书。从系统中根证书。用根证书的公钥。解密服务端证书。验证证书的是否可信 （）
- 证书可信的情况下。客户端向server发送下面的信息 ： （都是用服务端的公钥加密的）
  -  一个随机数
  - 编码改变通知。表示随后的信息都将使用双方商定的方法和密钥发送
  - 客户端握手结束通知
- ChangeCipherSpec
  - 用户告诉服务端 客户端已经切换好之前协商好的加密套件。在ChangeCliperSpec完毕之后之后 ，客户端会使用商量好的加密套件和seesion Secret 加密一段finish的数据传递给服务端
- 接收到数据  ，用私钥解密。